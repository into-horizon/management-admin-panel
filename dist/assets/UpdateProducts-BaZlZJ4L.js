import{be as U,n as A,d as H,m as b,r as d,u as L,c as w,bf as B,bg as R,bh as K,bi as G,j as e,ac as I,k as O,P as g,Q as r,ae as n,af as o,aZ as _,a_ as v,aF as C,a$ as Q,ab as Y,bj as Z}from"./index-48Ud3P6g.js";import{_ as $}from"./lodash-BeNFXnYs.js";const M=()=>{const{showOptionDialog:S}=U(),u=A(),{t:s,i18n:x}=H("translation",{keyPrefix:"addProduct"}),{searched:a}=b(t=>t.products),{parentCategories:{data:V},childCategories:{data:p},grandChildCategories:{data:m}}=b(t=>t.category);$.range(30,51);const[F,P]=d.useState(!0),T=L().search,k=w(),y=new URLSearchParams(T).get("id"),[j,f]=d.useState({visible:!0,data:p.filter(t=>t.parent_id===a.parent_category_id)}),[c,h]=d.useState({visible:!0,selected:!0,add:!1,select:!0,data:m.filter(t=>t.parent_id===a.child_category_id)});d.useEffect(()=>{f(t=>({...t,data:p.filter(i=>i.parent_id===a.parent_category_id)})),h(t=>({...t,data:m.filter(i=>i.parent_id===a.child_category_id),selected:!!a.grandchild_category_id}))},[a.id]);const D=(t,i)=>{t.preventDefault();const l=t.target;let N={id:i,entitle:l.entitle.value,artitle:l.artitle.value,metatitle:l.metatitle.value,sku:l.sku.value,price:Number(l.price.value),brand_name:l.brandName.value,endescription:l.endescription.value,ardescription:l.ardescription.value,parent_category_id:l.parentCategory.value,child_category_id:l.childCategory.value,grandchild_category_id:l.grandChildCategory?l.grandChildCategory.value==="default"?null:l.grandChildCategory.value:null};S({containerStyle:{width:350},text:"Updating your product will change its status to `Pending`",title:"Updating Product?",options:[{name:"Cancel",type:"cancel"},{name:"Update",type:"confirm",style:{background:"lightcoral"}}],onConfirm:()=>{u(Z({...a,...N})),k(-1)}})},E=t=>{({...j},f({data:p.filter(i=>i.parent_id===t.target.value),visible:!0})),h(i=>({...i,data:[]}))},q=t=>{h(i=>({...i,data:m.filter(l=>l.parent_id===t.target.value),visible:!0}))};return d.useEffect(()=>{Promise.all([u(B()),u(R()),u(K()),y&&u(G(y))]).then(()=>P(!1))},[]),d.useEffect(()=>{let t=document.querySelectorAll("#label");x.language==="ar"?t.forEach(i=>i.setAttribute("class","rightBorder")):x.language==="en"&&t.forEach(i=>i.setAttribute("class","leftBorder"))},[a,x.language]),d.useEffect(()=>{h(t=>({...t,select:!!a.grandchild_category_id}))},[a.id]),e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"update product"}),(a==null?void 0:a.id)&&e.jsx(I,{onSubmit:t=>D(t,a.id),children:F?e.jsx(O,{}):e.jsxs(g,{xs:{gutterY:5},children:[e.jsx(r,{xs:12,children:e.jsxs(g,{className:"justify-content-center",children:[e.jsxs(r,{xs:"auto",children:[e.jsxs(n,{children:[s("englishTitle"),"*"]}),e.jsx(o,{type:"text",id:"entitle",placeholder:s("englishTitle"),required:!0,defaultValue:a.entitle})]}),e.jsxs(r,{xs:"auto",children:[e.jsxs(n,{children:[s("arabicTitle"),"*"]}),e.jsx(o,{type:"text",id:"artitle",placeholder:s("arabicTitle"),required:!0,defaultValue:a.artitle})]}),e.jsxs(r,{xs:"auto",children:[e.jsx(n,{children:s("metaTitle")}),e.jsx(o,{type:"text",id:"metatitle",placeholder:s("metaTitle"),defaultValue:a.metatitle??""})]}),e.jsxs(r,{xs:"auto",children:[e.jsx(n,{children:"SKU"}),e.jsx(o,{type:"text",id:"sku",placeholder:"SKU",defaultValue:a.sku})]}),e.jsxs(r,{xs:"auto",children:[e.jsxs(n,{children:[s("price"),"*"]}),e.jsx(o,{type:"number",id:"price",placeholder:s("price"),step:"0.01",required:!0,defaultValue:a.price})]}),e.jsxs(r,{xs:"auto",children:[e.jsx(n,{children:s("brandName")}),e.jsx(o,{type:"text",id:"brandName",placeholder:s("brandName"),defaultValue:a.brand_name??""})]})]})}),e.jsx(r,{xs:12,children:e.jsxs(g,{xs:{gutter:2},children:[e.jsx(r,{md:12,lg:6,children:e.jsxs(_,{children:[e.jsx(v,{placeholder:"Leave a comment here",id:"endescription",style:{height:"100px"},defaultValue:a.endescription,required:!0}),e.jsxs(n,{htmlFor:"floatingTextarea2",children:[s("englishDescrition"),"*"]})]})}),e.jsx(r,{md:12,lg:6,children:e.jsxs(_,{children:[e.jsx(v,{placeholder:"Leave a comment here",id:"ardescription",defaultValue:a.ardescription,style:{height:"100px"},required:!0}),e.jsxs(n,{htmlFor:"floatingTextarea3",children:[s("arabicDescription"),"*"]})]})})]})}),e.jsx(r,{lg:3,md:4,sm:6,xs:12,children:e.jsxs(g,{xs:{gutter:2},children:[e.jsx(r,{xs:12,children:e.jsx(C,{"aria-label":"Default select example",required:!0,onChange:E,id:"parentCategory",defaultValue:a.parent_category_id,children:d.Children.toArray(V.map(t=>e.jsx("option",{value:t.id,children:t.entitle})))})}),e.jsx(r,{xs:12,children:e.jsx(C,{"aria-label":"Default select example",disabled:j.data.length===0,onChange:q,id:"childCategory",defaultValue:a.child_category_id,children:d.Children.toArray(j.data.map(t=>e.jsx("option",{value:t.id,children:t.entitle})))})}),e.jsx(r,{xs:12,children:e.jsx(Q,{id:"flexCheckDefault",label:"Select Third Category",onChange:t=>h({...c,select:t.target.checked}),checked:c.select,disabled:c.data.length===0})}),c.select&&e.jsx(r,{xs:12,children:e.jsxs(C,{"aria-label":"Default select example",id:"grandChildCategory",disabled:c.data.length===0,defaultValue:a.grandchild_category_id??"",children:[e.jsx("option",{value:"default",children:s("grandChildCategory")}),d.Children.toArray(c.data.map(t=>e.jsx("option",{value:t.id,children:t.entitle})))]})})]})}),e.jsx(r,{xs:12,children:e.jsx(Y,{type:"submit",color:"primary",children:s("submit")})})]})})]})};export{M as default};
