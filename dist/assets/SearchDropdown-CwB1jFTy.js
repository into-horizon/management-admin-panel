import{r as c,j as n,k as N,cm as j,af as u,M as E,S as p,a$ as A}from"./index-48Ud3P6g.js";import{C as I}from"./index.esm-CyPqoXYn.js";const F=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M256.072,424l-11.421-11.313-85.808-85.809.053-.054L16,183.928l97.122-97.122,142.9,142.9,142.9-142.9,97.122,97.122L353.243,326.722l-11.361,11.469Zm-.107-45.254.054.053,51.835-51.835L319.2,315.511,450.783,183.928,398.915,132.06l-142.9,142.9-142.9-142.9L61.254,183.928l142.9,142.9-.053.054Z' class='ci-primary'/>"],z=({options:d,onSelect:o,onChange:f,loading:l,placeholder:e,delay:C,multiple:t,selectedValue:s,emptyMessage:g})=>{const[v,m]=c.useState(!1),[L,w]=c.useState(null),h=c.useRef(null),x=r=>{o(t?s?s==null?void 0:s.concat(r):[r]:r)},b=r=>{m(!0),w(r.target.value),f==null||f(r.target.value)};c.useEffect(()=>{const r=i=>{var a;(a=h.current)!=null&&a.contains(i.target)?m(y=>!y):m(!1)};return window.addEventListener("click",r),()=>{window.removeEventListener("click",r)}},[]);function k(r){if(Array.isArray(s))return!!s.find(i=>i.id===r.id)}return n.jsxs("div",{className:"search-dropdown form-control",ref:h,children:[n.jsx("div",{className:"end-adornment",children:l?n.jsx(N,{color:"secondary",size:"sm"}):n.jsxs(n.Fragment,{children:[!t&&s&&n.jsx(j,{onClick:()=>o(null)}),n.jsx(I,{icon:F,color:"red",size:"sm"})]})}),s&&n.jsx("div",{className:"selected-items",children:t?s==null?void 0:s.map(r=>n.jsxs("span",{className:"chip",children:[n.jsx("strong",{children:r.title}),n.jsx(j,{onClick:i=>{i.stopPropagation(),o(s.filter(a=>a.id!==r.id))}})]},r.id)):n.jsx("span",{children:s==null?void 0:s.title})}),(!t&&!s||t)&&n.jsx(u,{className:"dropdown-input",onChange:b,placeholder:e??"search for title",delay:C}),v&&n.jsx(E,{className:"floating-dropdown",children:c.Children.toArray(d.length!==0?d==null?void 0:d.map(r=>n.jsx(p,{component:"button",className:"floating-dropdown-item position-relative",type:"button",onClick:i=>{t&&i.stopPropagation(),!t&&x(r)},children:t?n.jsx(A,{id:r.title,label:r.title,floatingLabel:r.title,checked:k(r),className:" position-absolute",hitArea:"full",onChange:i=>i.target.checked?x(r):o(s.filter(a=>a.id!==r.id))}):r.title})):L&&!l&&n.jsx(p,{component:"button",className:"floating-dropdown-item",type:"button",disabled:!0,children:g??" no results found"}))})]})};export{z as S};
