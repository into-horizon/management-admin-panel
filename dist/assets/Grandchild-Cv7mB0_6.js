import{m as $,r as i,n as w,bh as B,bB as l,j as t,ac as I,P as M,Q as o,af as V,aa as d,ab as c,bJ as k,bK as z,bL as g,bM as x,bH as J,R as K,bN as Q}from"./index-48Ud3P6g.js";import{T as q}from"./Table-BMwozXSY.js";import{C as h}from"./index.esm-CyPqoXYn.js";import{c as O}from"./cil-filter-x-DEIlHx5l.js";import{c as U}from"./cil-search-C59ySTwT.js";import{c as W}from"./cil-trash-Bi1lSbbJ.js";import{D as Y}from"./DeleteModal-Bo2mqpaY.js";import{S as Z}from"./SearchDropdown-CwB1jFTy.js";import{A as v}from"./AddCategoryModal-XKOgx4G_.js";import"./Paginator-C-gW1K4z.js";import"./lodash-BeNFXnYs.js";import"./cil-check-CLln4ywF.js";import"./cil-plus-DmDyxMpI.js";const pe=()=>{const{grandChildCategories:{data:f,count:C},isLoading:j,grandchildParams:u}=$(e=>e.category),[y,b]=i.useState([]),[a,m]=i.useState(null),[T,p]=i.useState(!1),[ee,S]=i.useState(!1),[D,F]=i.useState(1),n=w();i.useEffect(()=>{!(a!=null&&a.id)&&S(!0)},[a==null?void 0:a.id]),i.useEffect(()=>{n(B())},[u]);const E=({id:e})=>{const[s,r]=i.useState(!1),X=()=>{n(Q(e)),r(!1)};return t.jsxs(K.Fragment,{children:[t.jsx(Y,{visible:s,onClose:()=>r(!1),onDelete:X,id:void 0}),t.jsx(d,{content:"Delete",children:t.jsx(c,{color:"danger",onClick:()=>r(!0),children:t.jsx(h,{icon:W})})})]})},G=[{header:"english title",field:"entitle",edit:{inputType:l.TEXT}},{header:"arabic title",field:"artitle",edit:{inputType:l.TEXT}},{header:"parent title",field:"p_artitle",body:e=>{var s,r;return`${(s=e.child_category)==null?void 0:s.entitle} - ${(r=e.child_category)==null?void 0:r.artitle}`}},{header:"meta title",field:"metatitle",body:e=>e.metatitle?e.metatitle:"-",edit:{inputType:l.TEXT}},{header:"products count",field:"products_count"}],H=async e=>{let{data:{data:s}}=await J.getAllChildCategoires({title:e});b(s),p(!1)},P=e=>{e.preventDefault();const s=e.target;let r={};s.title.value&&(r.title=s.title.value),a!=null&&a.id&&(r.parent_id=a.id),n(g()),n(x({...r}))},R=e=>{e.target.reset(),n(g()),m(null)},A=e=>{p(!0),setTimeout(()=>H(e),1e3)},_=async e=>{z(e)},L=e=>t.jsx(t.Fragment,{children:t.jsx(E,{...e})}),N=e=>{F(e),n(x({offset:(u.limit??10)*(e-1)}))};return t.jsxs(t.Fragment,{children:[t.jsx(v,{type:"grand",action:_}),t.jsx("div",{className:"card padding mrgn25",children:t.jsx(I,{onSubmit:P,onReset:R,children:t.jsxs(M,{className:"justify-content-center align-items-end",xs:{gutter:1},children:[t.jsx(o,{xs:"auto",children:t.jsx(V,{id:"title",placeholder:"title"})}),t.jsx(o,{xs:"auto",children:i.Children.toArray(t.jsx(Z,{options:y.map(e=>({title:`${e.entitle} - ${e.artitle}`,id:e.id})),placeholder:"select child category",onChange:A,onSelect:e=>m(e),loading:T}))}),t.jsx(o,{xs:"auto",children:t.jsx(d,{content:"search",children:t.jsx(c,{type:"submit",children:t.jsx(h,{icon:U})})})}),t.jsx(o,{xs:"auto",children:t.jsx(d,{content:"clear filter",children:t.jsx(c,{color:"secondary",type:"reset",children:t.jsx(h,{icon:O})})})})]})})}),t.jsx(q,{data:f,count:C,columns:G,loading:j,onPageChange:N,Actions:L,pageNumber:D,pageSize:10,editable:!0,editFn:k})]})};export{pe as default};
