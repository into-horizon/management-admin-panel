import{ax as b,n as S,c as E,m as H,r as n,ay as I,j as s,k as x,f as T,P as F,Q as L,aq as q,ar as B,ac as D,as as p,at as h,af as j,ab as g,az as G,R as z}from"./index-48Ud3P6g.js";import{C as f}from"./index.esm-CyPqoXYn.js";import{c as w}from"./cil-lock-locked-6beG67hk.js";const A=({load:r})=>{const{token:i}=b(),c=S(),l=E(),{message:M,loggedIn:d}=H(e=>e.login),[t,o]=n.useState(""),[m,C]=n.useState(""),[v,Q]=n.useState(!0),[u,V]=n.useState(!1),y=e=>{e.preventDefault();const a=e.currentTarget;if(a.password.value!==a.rPassword.value){o("passwords don`t match, please check again");return}c(G(i,a.password.value)),a.reset()},P=e=>{m===e.target.value?o(""):o("password does not match")};n.useEffect(()=>{r==null||r(!0),d&&l("/"),r==null||r(!1),c(I(i))},[]);const k=({title:e,details:a})=>s.jsxs(z.Fragment,{children:[s.jsx("h5",{children:e}),s.jsx("ol",{children:a==null?void 0:a.map((N,R)=>s.jsx("li",{children:N},`li${R}`))})]});return s.jsx("div",{className:"bg-light min-vh-100 d-flex flex-row align-items-center",children:d?s.jsx(x,{color:"primary"}):s.jsx(T,{children:s.jsx(F,{className:"justify-content-center",children:s.jsx(L,{md:9,lg:7,xl:6,children:v?s.jsx(x,{color:"primary"}):s.jsx(q,{className:"mx-4",children:s.jsxs(B,{className:"p-4",children:[s.jsxs(D,{onSubmit:y,children:[s.jsx("h1",{children:!u&&typeof t=="string"?t:"Reset Password"}),u&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-medium-emphasis",children:"Reset Your Password"}),s.jsxs(p,{className:"mb-3",children:[s.jsx(h,{children:s.jsx(f,{icon:w})}),s.jsx(j,{placeholder:"Enter Password",value:m,onChange:e=>C(e.target.value),id:"password",type:"password",required:!0})]}),s.jsxs(p,{className:"mb-3",children:[s.jsx(h,{children:s.jsx(f,{icon:w})}),s.jsx(j,{placeholder:"Repeat your password",id:"rPassword",type:"password",required:!0,onChange:P})]}),typeof t!="string"?s.jsx(k,{title:t.title,details:t.details}):s.jsx("p",{style:{fontWeight:"bold"},children:t}),s.jsx("div",{className:"d-grid",children:s.jsx(g,{type:"submit",color:"info",children:"Reset Password"})})]})]}),s.jsx("div",{className:"d-grid",children:s.jsx(g,{color:"link",onClick:()=>l("/login"),children:"Login"})})]})})})})})})};export{A as default};
