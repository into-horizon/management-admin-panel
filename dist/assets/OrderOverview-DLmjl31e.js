import{m as A,r as i,n as G,bm as L,bn as U,j as e,bo as q,a$ as m,P as l,Q as s,ac as p,aF as T,R as z,ab as n,af as Q,bp as d,aN as X,aa as $,aC as J,aD as K,aE as W,ae as Y,aG as Z,bq as ee,br as ae}from"./index-48Ud3P6g.js";import{O as re}from"./OrdersModel-CkPWa7Jd.js";import{P as se}from"./Paginator-C-gW1K4z.js";import{C as j}from"./index.esm-CyPqoXYn.js";import{c as te}from"./cil-pencil-esS0QKUH.js";import{c as E}from"./cil-search-C59ySTwT.js";import{T as oe}from"./Table-BMwozXSY.js";import{E as ie}from"./Export-DAAI5dRM.js";import{C as le}from"./CopyableText-CpXrf0Nf.js";import"./Pdf-DyouSArg.js";import"./cil-cloud-download-cGFCWpXr.js";import"./cil-description-zu5GvIGG.js";import"./lodash-BeNFXnYs.js";import"./cil-check-CLln4ywF.js";const Ce=()=>{const b={limit:5,offset:0},{overviewParams:t,isLoading:v,ordersOverview:{data:g,count:f},statuses:H}=A(a=>a.orders),[V,D]=i.useState([]),o=G();i.useEffect(()=>{o(L()),o(U())},[t]);const[c,y]=i.useState("status"),[u,M]=i.useState("card"),[B,h]=i.useState(!1),C=a=>{var w,k,N,F,O,P;const r=a.target;d({order_id:(w=r.order)==null?void 0:w.value,status:(k=r.status)==null?void 0:k.value}),a.preventDefault();let x={};(N=r.status)!=null&&N.value&&(x.status=(F=r.status)==null?void 0:F.value),(O=r.order)!=null&&O.value&&(x.customer_order_id=(P=r.order)==null?void 0:P.value),d({...b,...x})},R=[{header:"order id",field:"customer_order_id",body:a=>e.jsx(le,{data:a,field:"customer_order_id"})},{header:"status",field:"status"}],S=a=>{M(a.target.id),d(b)},_=a=>{a.preventDefault();const r=a.target;o(ae({id:V.join("&"),status:r.status.value})),h(!1)},I=async()=>{let a={...t};a==null||delete a.limit,a==null||delete a.offset;let{orders:r}=await ee.getStoreNotPendingOrders(a);return r};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"orders overview"}),e.jsxs(q,{role:"group","aria-label":"Basic checkbox toggle button group",size:"lg",className:"m-2-1rem",children:[e.jsx(m,{type:"radio",button:{color:"primary",variant:"outline"},name:"btnradio",id:"card",label:"Card View",checked:u==="card",onChange:S}),e.jsx(m,{type:"radio",button:{color:"primary",variant:"outline"},name:"btnradio",id:"table",checked:u==="table",label:"Table View",onChange:S})]}),e.jsxs(l,{className:"background",children:[e.jsx(s,{md:2,children:e.jsx("strong",{children:"search by"})}),e.jsx(s,{md:2,children:e.jsx(m,{type:"radio",name:"search",value:"status",label:"order status",checked:c==="status",onChange:a=>y(a.target.value)})}),e.jsx(s,{md:2,children:e.jsx(m,{type:"radio",name:"search",value:"number",label:"order number",checked:c==="number",onChange:a=>y(a.target.value)})}),c==="status"&&e.jsx(p,{onSubmit:C,className:"mgn-top50",children:e.jsxs(l,{children:[e.jsx(s,{children:e.jsxs(T,{id:"status",children:[e.jsx("option",{value:"",children:"All"}),z.Children.toArray(H.map(a=>e.jsx("option",{value:a,children:a})))]})}),e.jsx(s,{children:e.jsxs(n,{type:"submit",children:[e.jsx(j,{icon:E}),"search"]})})]})}),c==="number"&&e.jsx(p,{className:"mt-3",onSubmit:C,children:e.jsxs(l,{children:[e.jsx(s,{children:e.jsx(Q,{type:"text",placeholder:"order number","aria-label":"default input example",id:"order"})}),e.jsx(s,{children:e.jsxs(n,{type:"submit",children:[e.jsx(j,{icon:E}),"search"]})})]})})]}),u==="card"&&e.jsxs(e.Fragment,{children:[e.jsx(re,{data:g,loading:v}),e.jsx(se,{count:+f,params:t,onPageChange:a=>o(d(X(t,a))),cookieName:"orderOverview"})]}),u==="table"&&e.jsxs(e.Fragment,{children:[e.jsxs(l,{className:"justify-content-end mgn-top50",xs:{gutterX:3},children:[e.jsx(s,{xs:"auto",children:e.jsx(ie,{color:"primary",data:I,fileName:"orders"})}),e.jsxs(s,{xs:"auto",children:[e.jsx($,{content:"update status",children:e.jsx(n,{color:"secondary",onClick:()=>h(!0),children:e.jsx(j,{icon:te})})}),e.jsxs(J,{visible:B,alignment:"center",children:[e.jsx(K,{children:e.jsx(W,{children:"Bulk Status Update"})}),e.jsxs(p,{onSubmit:_,children:[e.jsx(l,{className:"justify-content-center",children:e.jsxs(s,{xs:"auto",children:[e.jsx(Y,{htmlFor:"status",children:"Select Status"}),e.jsxs(T,{name:"status",id:"status",children:[e.jsx("option",{value:"delivered",children:"delivered"}),e.jsx("option",{value:"canceled",children:"canceled"}),e.jsx("option",{value:"ready for pick-up",children:"ready for pick-up"}),e.jsx("option",{value:"out for delivery",children:"out for delivery"}),e.jsx("option",{value:"received at hub",children:"received at hub"}),e.jsx("option",{value:"ready for delivery",children:"ready for delivery"})]})]})}),e.jsxs(Z,{children:[e.jsx(n,{color:"secondary",onClick:()=>h(!1),children:"Cancel"}),e.jsx(n,{color:"primary",type:"submit",children:"Submit"})]})]})]})]})]}),e.jsx(oe,{checkbox:!0,loading:v,columns:R,data:g,count:f,params:t,cookieName:"tableView",onPageChange:a=>o(d({offset:(a-1)*t.limit})),displayedItems:!0,onSelect:D})]})]})};export{Ce as default};
