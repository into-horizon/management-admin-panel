import{m as E,r as s,j as t,R,ab as n,aC as $,aD as k,aE as q,ac as H,P as V,Q as r,af as o,a_ as _,aG as v,bH as C}from"./index-48Ud3P6g.js";import{C as T}from"./index.esm-CyPqoXYn.js";import{c as z}from"./cil-plus-DmDyxMpI.js";import{S as h}from"./SearchDropdown-CwB1jFTy.js";const K=({action:x,type:l})=>{const{parentCategories:{data:m},childCategories:{data:g}}=E(e=>e.category),[j,i]=s.useState(!1),[p,c]=s.useState([]),[f,S]=s.useState(""),[y,L]=s.useState(),[w,d]=s.useState([]),[b,A]=s.useState(""),[u,B]=s.useState(!1),D=async()=>{const{data:{data:e}}=await C.getAllParentCategoires();return e},P=async e=>{L(e);const{data:{data:a}}=await C.getAllChildCategoires({parent_id:e.id});S(e.id),d(a)};s.useEffect(()=>{D().then(e=>c(e))},[]);const I=e=>{d(g.filter(a=>a.entitle.toLowerCase().includes(e.toLowerCase())||a.artitle.toLowerCase().includes(e.toLowerCase())))},F=e=>{c(m.filter(a=>a.entitle.toLocaleLowerCase().includes(e.toLocaleLowerCase())||a.artitle.toLocaleLowerCase().includes(e.toLocaleLowerCase())))},M=e=>{e.preventDefault();const a=e.target;x({entitle:a.entitle.value,artitle:a.artitle.value,metatitle:a.metatitle.value,content:a.content.value,parent_id:l==="child"?f:b}),i(!1)};return t.jsxs(R.Fragment,{children:[t.jsxs(n,{color:"primary",onClick:()=>i(!0),children:[t.jsx(T,{icon:z,size:"lg"}),"Add Category"]}),t.jsxs($,{alignment:"center",visible:j,onClose:()=>i(!1),backdrop:"static",children:[t.jsx(k,{children:t.jsx(q,{children:"Add Category"})}),t.jsxs(H,{onSubmit:M,children:[t.jsxs(V,{className:"justify-content-center",xs:{gutter:2},children:[t.jsx(r,{xs:"auto",children:t.jsx(o,{placeholder:"english title",id:"entitle",required:!0})}),t.jsx(r,{xs:"auto",children:t.jsx(o,{placeholder:"arabic title",id:"artitle",required:!0})}),(l==="child"||l==="grand")&&t.jsx(r,{xs:"auto",children:t.jsx(h,{options:p.map(e=>({title:`${e.entitle} - ${e.artitle}`,id:e.id})),onChange:F,placeholder:"select parent category",onSelect:e=>{e&&!Array.isArray(e)&&P(e)},loading:u,selectedValue:y})}),l==="child"&&t.jsx(r,{xs:5,children:t.jsx(o,{type:"number",placeholder:"commission",max:".99",min:".01",step:".01",required:!0})}),l==="grand"&&t.jsx(r,{xs:"auto",children:t.jsx(h,{options:w.map(e=>({title:`${e.entitle} - ${e.artitle}`,id:e.id})),onChange:I,placeholder:"select child category",onSelect:e=>{e&&!Array.isArray(e)&&A(e.id)},loading:u})}),t.jsx(r,{xs:10,children:t.jsx(o,{placeholder:"meta title",id:"metatitle"})}),t.jsx(r,{xs:10,children:t.jsx(_,{placeholder:"content",id:"content"})})]}),t.jsxs(v,{children:[t.jsx(n,{type:"submit",children:"Submit"}),t.jsx(n,{color:"danger",onClick:()=>i(!1),children:"Close"})]})]})]})]})};export{K as A};
