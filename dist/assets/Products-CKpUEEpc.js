import{a8 as fe,g as ge,d as L,r as C,j as e,ab as P,aC as te,aD as se,aE as ie,ac as Q,P as E,Q as u,ae as V,af as W,aG as ne,aF as I,R as ee,n as Y,a_ as ye,b1 as ve,m as re,b2 as be,b3 as Ce,b4 as Se,b5 as ke,b6 as we,c as ze,aK as Ne,K as Pe,b7 as _e,b8 as Me,b9 as me,aN as Te,e as oe,ba as De,bb as Ee,I as le,J as ce,bc as He,bd as de}from"./index-48Ud3P6g.js";import{E as Fe}from"./Export-DAAI5dRM.js";import{C as $}from"./index.esm-CyPqoXYn.js";import{c as Re}from"./cil-external-link-2XtDvLdz.js";import{c as Oe}from"./cil-pencil-esS0QKUH.js";import{M as he,C as $e,a as qe,c as Ae}from"./ColorSelector-BPYDN6kS.js";import{P as Ie}from"./Paginator-C-gW1K4z.js";import{c as Ve}from"./cil-plus-DmDyxMpI.js";import{_ as Le}from"./lodash-BeNFXnYs.js";import{c as Be}from"./cil-trash-Bi1lSbbJ.js";import{D as We}from"./DeleteModal-Bo2mqpaY.js";import{c as Xe}from"./cil-check-CLln4ywF.js";import{F as Ue,a as Ze}from"./FilterCard-D5uFsBWP.js";import{c as Ke}from"./connect-C6z2JEc3.js";import"./cil-cloud-download-cGFCWpXr.js";import"./cil-filter-x-DEIlHx5l.js";import"./cil-search-C59ySTwT.js";const Qe=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M432,64H16V384H432ZM400,352H48V96H400Z' class='ci-primary'/><polygon fill='var(--ci-primary-color, currentColor)' points='464 144 464 416 96 416 96 448 496 448 496 144 464 144' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M224,302.46c39.7,0,72-35.137,72-78.326s-32.3-78.326-72-78.326-72,35.136-72,78.326S184.3,302.46,224,302.46Zm0-124.652c22.056,0,40,20.782,40,46.326s-17.944,46.326-40,46.326-40-20.782-40-46.326S201.944,177.808,224,177.808Z' class='ci-primary'/><rect width='32' height='176' x='80' y='136' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='176' x='336' y='136' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/>"],Ye=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M336,72V40H40V472H472V184H440v25.68l-64.769-64.77L306,214.142l-100-100-134,134V72Zm39.231,118.166L440,254.935v93.207L328.628,236.769ZM206,159.4l234,234V440H72V293.4Z' class='ci-primary'/><polygon fill='var(--ci-primary-color, currentColor)' points='448 16 416 16 416 64 368 64 368 96 416 96 416 144 448 144 448 96 496 96 496 64 448 64 448 16' class='ci-primary'/>"],Je=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M16,48V464H496V48ZM464,432H48V336H464Zm0-128H48V208H464ZM48,176V80H464v96Z' class='ci-primary'/><rect width='32' height='32' x='80' y='112' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='80' y='240' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='80' y='368' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/>"];var G={exports:{}},K={},ue;function Ge(){if(ue)return K;ue=1,Object.defineProperty(K,"__esModule",{value:!0});var a=fe();function S(){return S=Object.assign||function(h){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(h[r]=t[r])}return h},S.apply(this,arguments)}var l=a.createElement("svg",{viewBox:"-2 -5 14 20",height:"100%",width:"100%",style:{position:"absolute",top:0}},a.createElement("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"})),f=a.createElement("svg",{height:"100%",width:"100%",viewBox:"-2 -5 17 21",style:{position:"absolute",top:0}},a.createElement("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"}));function j(h){if(h.length===7)return h;for(var n="#",t=1;t<4;t+=1)n+=h[t]+h[t];return n}function v(h,n,t,r,p){return function(o,z,N,D,g){var w=(o-N)/(z-N);if(w===0)return D;if(w===1)return g;for(var b="#",H=1;H<6;H+=2){var F=parseInt(D.substr(H,2),16),A=parseInt(g.substr(H,2),16),s=Math.round((1-w)*F+w*A).toString(16);s.length===1&&(s="0"+s),b+=s}return b}(h,n,t,j(r),j(p))}var d=function(h){function n(t){h.call(this,t);var r=t.height,p=t.width,o=t.checked;this.t=t.handleDiameter||r-2,this.i=Math.max(p-r,p-(r+this.t)/2),this.o=Math.max(0,(r-this.t)/2),this.state={h:o?this.i:this.o},this.l=0,this.u=0,this.p=this.p.bind(this),this.v=this.v.bind(this),this.g=this.g.bind(this),this.k=this.k.bind(this),this.M=this.M.bind(this),this.m=this.m.bind(this),this.T=this.T.bind(this),this.$=this.$.bind(this),this.C=this.C.bind(this),this.D=this.D.bind(this),this.O=this.O.bind(this),this.S=this.S.bind(this)}return h&&(n.__proto__=h),(n.prototype=Object.create(h&&h.prototype)).constructor=n,n.prototype.componentDidMount=function(){this.W=!0},n.prototype.componentDidUpdate=function(t){t.checked!==this.props.checked&&this.setState({h:this.props.checked?this.i:this.o})},n.prototype.componentWillUnmount=function(){this.W=!1},n.prototype.I=function(t){this.H.focus(),this.setState({R:t,j:!0,B:Date.now()})},n.prototype.L=function(t){var r=this.state,p=r.R,o=r.h,z=(this.props.checked?this.i:this.o)+t-p;r.N||t===p||this.setState({N:!0});var N=Math.min(this.i,Math.max(this.o,z));N!==o&&this.setState({h:N})},n.prototype.U=function(t){var r=this.state,p=r.h,o=r.N,z=r.B,N=this.props.checked,D=(this.i+this.o)/2;this.setState({h:this.props.checked?this.i:this.o});var g=Date.now()-z;(!o||g<250||N&&p<=D||!N&&p>=D)&&this.A(t),this.W&&this.setState({N:!1,j:!1}),this.l=Date.now()},n.prototype.p=function(t){t.preventDefault(),typeof t.button=="number"&&t.button!==0||(this.I(t.clientX),window.addEventListener("mousemove",this.v),window.addEventListener("mouseup",this.g))},n.prototype.v=function(t){t.preventDefault(),this.L(t.clientX)},n.prototype.g=function(t){this.U(t),window.removeEventListener("mousemove",this.v),window.removeEventListener("mouseup",this.g)},n.prototype.k=function(t){this.X=null,this.I(t.touches[0].clientX)},n.prototype.M=function(t){this.L(t.touches[0].clientX)},n.prototype.m=function(t){t.preventDefault(),this.U(t)},n.prototype.$=function(t){Date.now()-this.l>50&&(this.A(t),Date.now()-this.u>50&&this.W&&this.setState({j:!1}))},n.prototype.C=function(){this.u=Date.now()},n.prototype.D=function(){this.setState({j:!0})},n.prototype.O=function(){this.setState({j:!1})},n.prototype.S=function(t){this.H=t},n.prototype.T=function(t){t.preventDefault(),this.H.focus(),this.A(t),this.W&&this.setState({j:!1})},n.prototype.A=function(t){var r=this.props;(0,r.onChange)(!r.checked,t,r.id)},n.prototype.render=function(){var t=this.props,r=t.checked,p=t.disabled,o=t.className,z=t.offColor,N=t.onColor,D=t.offHandleColor,g=t.onHandleColor,w=t.checkedIcon,b=t.uncheckedIcon,H=t.checkedHandleIcon,F=t.uncheckedHandleIcon,A=t.boxShadow,s=t.activeBoxShadow,x=t.height,c=t.width,M=t.borderRadius,R=function(T,je){var ae={};for(var Z in T)Object.prototype.hasOwnProperty.call(T,Z)&&je.indexOf(Z)===-1&&(ae[Z]=T[Z]);return ae}(t,["checked","disabled","className","offColor","onColor","offHandleColor","onHandleColor","checkedIcon","uncheckedIcon","checkedHandleIcon","uncheckedHandleIcon","boxShadow","activeBoxShadow","height","width","borderRadius","handleDiameter"]),B=this.state,O=B.h,k=B.N,J=B.j,X={position:"relative",display:"inline-block",textAlign:"left",opacity:p?.5:1,direction:"ltr",borderRadius:x/2,WebkitTransition:"opacity 0.25s",MozTransition:"opacity 0.25s",transition:"opacity 0.25s",touchAction:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},U={height:x,width:c,margin:Math.max(0,(this.t-x)/2),position:"relative",background:v(O,this.i,this.o,z,N),borderRadius:typeof M=="number"?M:x/2,cursor:p?"default":"pointer",WebkitTransition:k?null:"background 0.25s",MozTransition:k?null:"background 0.25s",transition:k?null:"background 0.25s"},i={height:x,width:Math.min(1.5*x,c-(this.t+x)/2+1),position:"relative",opacity:(O-this.o)/(this.i-this.o),pointerEvents:"none",WebkitTransition:k?null:"opacity 0.25s",MozTransition:k?null:"opacity 0.25s",transition:k?null:"opacity 0.25s"},m={height:x,width:Math.min(1.5*x,c-(this.t+x)/2+1),position:"absolute",opacity:1-(O-this.o)/(this.i-this.o),right:0,top:0,pointerEvents:"none",WebkitTransition:k?null:"opacity 0.25s",MozTransition:k?null:"opacity 0.25s",transition:k?null:"opacity 0.25s"},y={height:this.t,width:this.t,background:v(O,this.i,this.o,D,g),display:"inline-block",cursor:p?"default":"pointer",borderRadius:typeof M=="number"?M-1:"50%",position:"absolute",transform:"translateX("+O+"px)",top:Math.max(0,(x-this.t)/2),outline:0,boxShadow:J?s:A,border:0,WebkitTransition:k?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",MozTransition:k?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",transition:k?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s"},_={height:this.t,width:this.t,opacity:Math.max(2*(1-(O-this.o)/(this.i-this.o)-.5),0),position:"absolute",left:0,top:0,pointerEvents:"none",WebkitTransition:k?null:"opacity 0.25s",MozTransition:k?null:"opacity 0.25s",transition:k?null:"opacity 0.25s"},q={height:this.t,width:this.t,opacity:Math.max(2*((O-this.o)/(this.i-this.o)-.5),0),position:"absolute",left:0,top:0,pointerEvents:"none",WebkitTransition:k?null:"opacity 0.25s",MozTransition:k?null:"opacity 0.25s",transition:k?null:"opacity 0.25s"};return a.createElement("div",{className:o,style:X},a.createElement("div",{className:"react-switch-bg",style:U,onClick:p?null:this.T,onMouseDown:function(T){return T.preventDefault()}},w&&a.createElement("div",{style:i},w),b&&a.createElement("div",{style:m},b)),a.createElement("div",{className:"react-switch-handle",style:y,onClick:function(T){return T.preventDefault()},onMouseDown:p?null:this.p,onTouchStart:p?null:this.k,onTouchMove:p?null:this.M,onTouchEnd:p?null:this.m,onTouchCancel:p?null:this.O},F&&a.createElement("div",{style:_},F),H&&a.createElement("div",{style:q},H)),a.createElement("input",S({},{type:"checkbox",role:"switch","aria-checked":r,checked:r,disabled:p,style:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1}},R,{ref:this.S,onFocus:this.D,onBlur:this.O,onKeyUp:this.C,onChange:this.$})))},n}(a.Component);return d.defaultProps={disabled:!1,offColor:"#888",onColor:"#080",offHandleColor:"#fff",onHandleColor:"#fff",uncheckedIcon:l,checkedIcon:f,boxShadow:null,activeBoxShadow:"0 0 2px 3px #3bf",height:28,width:56},K.default=d,K}var pe;function et(){return pe||(pe=1,G.exports=Ge()),G.exports}var tt=et();const st=ge(tt),it=({data:a,updateDiscount:S})=>{const{t:l}=L("translation",{keyPrefix:"addProduct"}),[f,j]=C.useState(!1),[v,d]=C.useState(a.discount),h=n=>{n.preventDefault();const t=n.target;S({id:a.id,discount:v,discount_rate:Number(t.discountRate.value)}).then(()=>j(!1))};return e.jsxs(C.Fragment,{children:[e.jsxs(P,{color:"secondary",type:"button",onClick:()=>j(!0),children:[e.jsx($,{icon:Qe}),l("discount")]}),e.jsxs(te,{alignment:"center",visible:f,onClose:()=>j(!1),children:[e.jsx(se,{children:e.jsx(ie,{children:l("discount")})}),e.jsxs(Q,{onSubmit:h,children:[e.jsxs(E,{className:"justify-content-center align-items-center",xs:{gutterY:2},children:[e.jsx(u,{xs:"auto",children:e.jsx(V,{htmlFor:"discount",children:l("discount")})}),e.jsx(u,{xs:"auto",children:e.jsx(st,{onChange:n=>d(n),id:"discount",checked:!!v,name:"discount"})}),e.jsxs(u,{xs:10,children:[e.jsx(V,{htmlFor:"discountRate",children:l("discountRate")}),e.jsx(W,{type:"number",max:"0.99",step:"0.01",id:"discountRate",defaultValue:a.discount_rate})]})]}),e.jsxs(ne,{children:[e.jsx(P,{color:"primary",type:"submit",children:l("submit")}),e.jsx(P,{color:"danger",onClick:()=>j(!1),children:l("cancel")})]})]})]})]})},nt=({onClick:a,setValues:S,values:l})=>{const f=v=>{S([...v.target.value.split(",")])},{t:j}=L("translation",{keyPrefix:"addProduct"});return e.jsx(ee.Fragment,{children:e.jsxs("div",{className:"addOwnSizes",children:[e.jsx(V,{htmlFor:"validationServer05",children:j("sizes")}),e.jsx(W,{type:"text",value:l.join(","),id:"sizesInput",placeholder:j("inserSizes"),required:!0,onChange:f}),e.jsx(P,{color:"secondary",onClick:a,children:j("add")})]})})},rt=({product:a,updateSizeAndQuantity:S})=>{var X,U;const l=a.size_and_color&&JSON.parse(a.size_and_color),f=!!((X=l==null?void 0:l[0])!=null&&X.color),j=!!((U=l==null?void 0:l[0])!=null&&U.size),v=(l==null?void 0:l.map(i=>i.color).filter((i,m,y)=>m===y.indexOf(i)))??[];l==null||l.map(i=>i.size).filter((i,m,y)=>m===y.indexOf(i));const[d,h]=C.useState(l),[n,t]=C.useState([]),r=C.useRef(null),p=C.useRef(null),[o,z]=C.useState(!1);let N=["XXS","XS","S","M","L","XL","XXL","XXXL"],D=Le.range(30,51);const[g,w]=C.useState({add:!1,data:[...N]}),{t:b}=L("translation",{keyPrefix:"addProduct"}),H=()=>{w(i=>({...i,data:[...i.data,...n]})),t([])},F=()=>{z(!1),h(l)},A=i=>{i.preventDefault(),S({id:a.id,quantity:(d==null?void 0:d.reduce((m,y)=>m+Number(y.quantity),0))||Number(i.target.quantityInput.value),size_and_color:d?JSON.stringify(d):null}),F()},s=i=>{let m=[...d,...i.map(y=>({id:d.length+1,size:y.name,color:null,quantity:1,idx:d.length}))];m=m.filter((y,_,q)=>_===q.findIndex(T=>T.size===y.size&&T.color===y.color)),h(m)},x=i=>{let m=[...l,...i.map(y=>({id:d.length+1,size:y.name,color:null,quantity:1,idx:d.length}))];h(m)},c=i=>{let m=[...l,...i.map((y,_)=>({id:l.length+_,size:null,color:y.name,quantity:1}))];m=m.filter((y,_,q)=>_===q.findIndex(T=>T.size===y.size&&T.color===y.color)),h(m)},M=i=>{let m=[...l,...i.map((y,_)=>({id:l.length+_,size:null,color:y.name,quantity:1}))];h(m)},R=()=>{let i=[...d,{id:d.length+1,color:r.current.value,size:p.current.value,quantity:1}];i=i.filter((m,y,_)=>y===_.findIndex(q=>q.size===m.size&&q.color===m.color)),h(i)},B=()=>{w(i=>({...i,data:[...i.data,...n]})),t([])},O=i=>{t(()=>[...i.target.value.split(",")])},k=(i,m)=>{let y=d.map(_=>_.id===m.id?{..._,quantity:Number(i.target.value)}:_);h(y)},J=i=>{h(m=>m.filter(y=>y.id!==i))};return e.jsxs(e.Fragment,{children:[e.jsxs(P,{color:"success",onClick:()=>z(!0),children:[e.jsx($,{icon:Je}),b("quantity")]}),e.jsxs(te,{alignment:"center",size:a.size_and_color?"lg":void 0,scrollable:!0,visible:o,onClose:()=>F(),fullscreen:!f&&j,children:[e.jsx(se,{children:e.jsx(ie,{children:b("quantity")})}),e.jsxs(Q,{onSubmit:A,children:[!a.size_and_color&&e.jsx(E,{className:"justify-content-center",children:e.jsxs(u,{xs:"auto",children:[e.jsxs(V,{htmlFor:"quantityInput",children:[b("quantity"),": "]}),e.jsx(W,{className:"quantity",id:"quantityInput",type:"number",min:"1",defaultValue:a.quantity})]})}),e.jsxs(E,{className:"justify-content-center",xs:{gutter:3},children:[e.jsxs(u,{md:6,children:[f&&!j&&e.jsx(E,{className:"justify-content-center padding",xs:{gutter:3},children:e.jsxs(u,{children:[" ",e.jsx(he,{options:$e.filter(i=>!v.includes(i)).map((i,m)=>({name:i,id:m+1})),onSelect:c,onRemove:M,displayValue:"name",placeholder:b("select")})]})}),j&&!f&&e.jsxs(E,{className:"padding",xs:{gutterY:2},children:[e.jsxs(u,{xs:12,children:[e.jsx("input",{type:"radio",name:"choose",className:"form-check-input",onChange:()=>w(i=>({...i,data:[...N],add:!1})),id:"symbolSizes",checked:typeof g.data[0]=="string"&&!g.add}),e.jsx("label",{htmlFor:"symbolSizes",children:b("symbolSizes")})]}),e.jsxs(u,{xs:12,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"choose",onChange:()=>w({...g,data:[...D],add:!1}),id:"numericSizes",checked:typeof g.data[0]=="number"&&!g.add}),e.jsx("label",{htmlFor:"numericSizes",children:b("numericSizes")})]}),e.jsxs(u,{xs:12,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"choose",onChange:()=>w(i=>({...i,add:!0})),checked:g.add,id:"addOther"}),e.jsx("label",{htmlFor:"addOther",children:b("addOther")})]}),e.jsx(u,{xs:12,children:!g.add&&e.jsx(he,{options:g.data.map((i,m)=>({name:i,id:m+1})),onSelect:s,onRemove:x,displayValue:"name",placeholder:b("select")})}),e.jsx(u,{xs:12,children:g.add&&e.jsx(nt,{setValues:t,onClick:H,values:n})})]}),j&&f&&e.jsxs(E,{className:"padding",xs:{gutterY:3},children:[e.jsxs(u,{md:12,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"sc",onChange:()=>w({data:[...N],add:!1}),checked:typeof g.data[0]=="string"&&!g.add,id:"symbolSizes"}),e.jsx("label",{htmlFor:"symbolSizes",children:b("symbolSizes")})]},"string"),e.jsxs(u,{md:12,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"sc",onChange:()=>w({data:[...D],add:!1}),checked:typeof g.data[0]=="number"&&!g.add,id:"numericSizes"}),e.jsx("label",{htmlFor:"numericSizes",children:b("numericSizes")})]}),e.jsxs(u,{md:12,children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"sc",onChange:()=>w({...g,add:!0}),checked:g.add,id:"addOther"}),e.jsxs("label",{htmlFor:"addOther",children:[b("addOther")," "]})]}),e.jsx(u,{md:4,children:e.jsxs(I,{ref:p,children:[e.jsx("option",{value:"",disabled:!0,children:"select size"}),g.data.map((i,m)=>e.jsx("option",{value:i,children:i},`${m}  ${i}`))]})}),e.jsx(u,{md:4,children:e.jsx(qe,{selectStatement:!0,ref:r})}),e.jsx(u,{md:4,children:e.jsxs(P,{color:"secondary",onClick:R,children:[e.jsx($,{icon:Ve,size:"sm"}),b("add")]})}),g.add&&e.jsxs("div",{className:"addOwnSizes",children:[e.jsx(V,{htmlFor:"validationServer05",children:b("sizes")}),e.jsx(W,{type:"text",value:n.join(","),id:"sizesInput",placeholder:b("inserSizes"),onChange:O}),e.jsx(P,{color:"secondary",type:"button",onClick:B,children:b("add")})]})]})]}),(f||j)&&e.jsx(u,{md:6,children:e.jsxs("ul",{className:"productUl",children:[d.length>0&&C.Children.toArray(d.map(i=>e.jsxs("li",{className:"m-5rem",children:[e.jsx("button",{type:"button",onClick:()=>J(i.id),children:"X"}),i.size&&i.color&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{className:"m-5rem",children:i.size})," -",e.jsx("strong",{className:"m-5rem",children:i.color})]}),i.size&&!i.color&&e.jsx("strong",{className:"m-5rem",children:i.size}),!i.size&&i.color&&e.jsx("strong",{className:"m-5rem",children:i.color}),e.jsx("input",{min:"0",type:"number",value:i.quantity,onChange:m=>k(m,i)})]})))," "]})})]}),e.jsxs(ne,{children:[e.jsx(P,{color:"primary",type:"submit",children:b("submit")}),e.jsx(P,{color:"danger",onClick:()=>F(),children:b("cancel")})]})]})]})]})},at=({deleteHandler:a,product:S})=>{const[l,f]=C.useState(!1),{t:j,i18n:v}=L("translation",{keyPrefix:"addProduct"});return e.jsxs(e.Fragment,{children:[e.jsxs(P,{color:"danger",onClick:()=>f(!0),children:[e.jsx($,{icon:Be}),j("delete")]}),e.jsx(We,{visible:l,onDelete:a,id:S.id,onClose:()=>f(!1)})]})},ot=({product:a,callback:S})=>{const[l,f]=C.useState(!1),[j,v]=C.useState(a.status),d=Y(),h=async n=>{var r;n.preventDefault();let t={id:a.id,status:n.currentTarget.status.value,rejection_reason:""};t.rejection_reason=((r=n.currentTarget.rejection_reason)==null?void 0:r.value)??"",d(ve(t)),f(!1),S==null||S()};return e.jsxs(e.Fragment,{children:[e.jsxs(P,{onClick:()=>f(!0),color:"info",children:[e.jsx($,{icon:Xe}),"Status"]}),e.jsxs(te,{visible:l,alignment:"center",onClose:()=>f(!1),children:[e.jsx(se,{children:e.jsx(ie,{children:"Update Status"})}),e.jsxs(Q,{onSubmit:h,children:[e.jsxs(E,{className:"justify-content-center align-items-center",xs:{gutter:3},children:[e.jsx(u,{xs:"auto",children:e.jsxs(I,{defaultValue:a.status,id:"status",onChange:n=>v(n.target.value),children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})}),j==="rejected"&&e.jsx(u,{xs:10,children:e.jsx(ye,{placeholder:"rejection reason",id:"rejection_reason",defaultValue:a.rejection_reason??"",required:!0})})]}),e.jsxs(ne,{children:[e.jsx(P,{type:"submit",children:"Submit"}),e.jsx(P,{color:"secondary",onClick:()=>f(!1),children:"Cancel"})]})]})]})]})},lt=()=>{Y();const{parentCategories:{data:a},childCategories:{data:S},grandChildCategories:{data:l},categories:f}=re(r=>r.category),[j,v]=C.useState([]),[d,h]=C.useState([]),n=r=>{var p;v(((p=f.find(o=>o.id===r.target.value))==null?void 0:p.children)??[]),h([])},t=r=>{var p;h(((p=j.find(o=>o.id===r.target.value))==null?void 0:p.children)??[])};return e.jsx(u,{xs:4,children:e.jsxs(E,{xs:{gutterY:3},children:[e.jsx(u,{xs:12,children:e.jsxs(I,{onChange:n,id:"parent_category_id",children:[e.jsx("option",{value:"",children:"Select first category"}),C.Children.toArray(f.map(r=>e.jsx("option",{value:r.id,children:`${r.entitle} - ${r.artitle}`})))]})}),e.jsx(u,{xs:12,children:e.jsxs(I,{disabled:j.length===0,onChange:t,id:"child_category_id",defaultValue:"",children:[e.jsx("option",{value:"",children:"Select second category"}),C.Children.toArray(j.map(r=>e.jsx("option",{value:r.id,children:`${r.entitle} - ${r.artitle}`})))]})}),e.jsx(u,{xs:12,children:e.jsxs(I,{disabled:d.length===0,id:"grandchild_category_id",defaultValue:"",children:[e.jsx("option",{value:"",children:"Select third category"}),C.Children.toArray(d.map(r=>e.jsx("option",{value:r.id,children:`${r.entitle} - ${r.artitle}`})))]})})]})})},ct=({addProductPictureHandler:a,deleteProductPictureHandler:S,updateSizeAndQuantity:l,updateDiscount:f,deleteProductHandler:j,status:v})=>{const d=ze(),{overview:{count:h,data:n},overviewParams:t,isLoading:r}=re(s=>s.products),p=Y(),{t:o,i18n:z}=L("translation",{keyPrefix:"addProduct"}),N=s=>{let x=[];for(let c=0;c<5-s;c++)x.push({id:"i1",product_picture:null});return x},D=(s,x)=>{var M;let c=new FormData;c.append("image",(M=s.target.files)==null?void 0:M[0]),c.append("id",x),a(c)},g=()=>{let s=document.querySelectorAll(".deleteBtn");if(z.language==="ar"&&s.length>0){let x=s[0].className.split(" ").slice(0,3).join(" ");s.forEach(c=>c.setAttribute("class",`${x} deleteBtnAr`))}else if(z.language==="en"&&s.length>0){let x=s[0].className.split(" ").slice(0,3).join(" ");s.forEach(c=>c.setAttribute("class",`${x} deleteBtnEn`))}},w=()=>{z.language==="ar"&&document.querySelectorAll(".productTitles").length>0?Array.from(document.getElementsByClassName("productTitles")).forEach(x=>x.style.flexDirection="row-reverse"):z.language==="en"&&document.querySelectorAll(".productTitles").length>0&&Array.from(document.getElementsByClassName("productTitles")).forEach(x=>x.style.flexDirection="")};C.useEffect(()=>{w(),g()},[z.language]),C.useEffect(()=>{g(),w()},[document.querySelectorAll(".deleteBtn")]);const b=async s=>{let{data:{data:x}}=await _e.getProducts(s);return x},H=s=>{s.preventDefault();const x=s.target;let c=["key","parent_category_id","child_category_id","grandchild_category_id","discount"];const M={...t};c.forEach(R=>{x[R].value&&x[R].value!==""&&(M[R]=x[R].value)}),p(me(M))},F=s=>{s.currentTarget.reset(),p(Me())},A=s=>{p(Te(t,s))};return e.jsx(e.Fragment,{children:e.jsxs(E,{xs:{gutterY:10},className:"justify-content-end",children:[e.jsx(u,{xs:"auto",children:e.jsx(Fe,{data:b,params:{status:v},title:"download products",fileName:"products"})}),e.jsx(u,{xs:12,children:e.jsx(Ue,{children:e.jsx(Q,{onSubmit:H,onReset:F,children:e.jsxs(E,{className:"justify-content-center align-items-center",xs:{gutterY:5},children:[e.jsx(u,{xs:"auto",children:e.jsx(W,{placeholder:"product name",id:"key"})}),e.jsx(lt,{}),e.jsxs(u,{xs:"auto",children:[e.jsx(V,{htmlFor:"discount",children:"discount"}),e.jsxs(I,{name:"discount",id:"discount",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"true",children:"true"}),e.jsx("option",{value:"false",children:"false"})]})]}),e.jsx(u,{xs:12}),e.jsx(Ze,{})]})})})}),r&&e.jsx(u,{xs:12,children:e.jsx(Ne,{})}),!r&&n.length===0&&e.jsx("h4",{className:"productStatusHead",children:o(`no${v}`)}),!r&&(n==null?void 0:n.map((s,x)=>e.jsxs(E,{className:"productRender",xs:{gutterY:2},children:[e.jsxs("div",{className:"productTitles",children:[e.jsx("h3",{className:"productTitle",children:`${o("englishTitle")}: ${s.entitle}`}),e.jsx("h3",{className:"productTitle",children:`${o("arabicTitle")}: ${s.artitle}`})]}),e.jsx("div",{className:"productPictures",children:ee.Children.toArray(s.pictures.length>0||v!=="pending"?[...s.pictures,...N(s.pictures.length)].map((c,M)=>e.jsx("div",{style:{position:"relative",width:"fit-content"},children:c.product_picture?e.jsxs(e.Fragment,{children:[e.jsx(P,{color:"light",className:"deleteBtn",onClick:()=>S({picture_id:c.id}),style:{visibility:v==="pending"?"hidden":"visible"},children:"X"}),e.jsx("img",{src:c.product_picture,alt:"vbdf"},`pic${c.id}`)]}):e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"file",id:s.id,hidden:!0,onChange:R=>D(R,s.id),accept:"image/png,image/jpeg"}),e.jsxs("label",{htmlFor:s.id,className:"uploadLabel",style:{visibility:v==="pending"?"hidden":"visible"},children:[e.jsx($,{icon:Ye}),o("choosePhoto")]})]})})):e.jsx("h2",{children:o("noPictures")}))}),e.jsxs(Pe,{color:"danger",className:"d-flex align-items-center",visible:!!s.rejection_reason,style:{marginTop:"1rem"},children:[e.jsx($,{icon:Ae,className:"flex-shrink-0 me-2",width:24,height:24}),e.jsxs("div",{children:[e.jsx("strong",{children:"Rejection reason: "}),`${s.rejection_reason}`]})]}),e.jsxs("div",{className:"productTitles",children:[e.jsxs("div",{children:[e.jsx("h4",{children:o("englishDescrition")}),e.jsx("p",{style:{textAlign:"left"},children:s.endescription})]}),e.jsxs("div",{children:[e.jsx("h4",{children:o("arabicDescription")}),e.jsx("p",{style:{textAlign:"right"},children:s.ardescription})]})]}),s.store_name&&e.jsxs("h5",{children:[e.jsx("strong",{children:"Store: "}),s.store_name]}),s.metatitle&&e.jsxs("h5",{children:[e.jsxs("strong",{children:[o("metatitle"),": "]}),s.metatitle]}),s.sku&&(z.language==="en"&&e.jsxs("h5",{children:[e.jsxs("strong",{children:[o("SKU"),":"]}),s.sku]})||z.language==="ar"&&e.jsxs("h5",{children:[s.sku,e.jsxs("strong",{children:[" :",o("SKU")]})]})),s.size_and_color?null:e.jsxs("h5",{children:[e.jsxs("strong",{children:[o("quantity"),": "]}),s.quantity]}),e.jsxs("h6",{children:[e.jsx("strong",{children:`${o("parentCategory")}: `}),s.p_entitle]}),e.jsxs("h6",{children:[e.jsx("strong",{children:`${o("childCategory")}:`})," ",s.c_entitle]}),s.grandchild_category_id&&e.jsxs("h6",{children:[e.jsx("strong",{children:`${o("grandChildCategory")}:`})," ",s.g_entitle]}),e.jsxs("h6",{children:[e.jsx("strong",{children:`${o("price")}:`})," ",s.price+" "+o(`${s.currency}`)]}),e.jsxs("h6",{children:[e.jsx("strong",{children:"Commission per sold item"})," ",(s.price*s.commission).toFixed(2)+" "+o(`${s.currency}`)]}),s.brand_name?e.jsxs("h6",{children:[e.jsx("strong",{children:`${o("brandName")}: `}),s.brand_name]}):null,s.rate?e.jsxs("h6",{children:[e.jsx("strong",{children:"Rate: "}),(+s.rate).toFixed(2),e.jsxs(P,{color:"link",onClick:()=>d(`/product/reviews/${s.id}`),children:[e.jsx($,{icon:Re}),"Reviews"]})]}):null,e.jsxs("h6",{children:[e.jsxs("strong",{children:[o("hasDiscount"),": "]}),s.discount?o("yes"):o("no")]}),s.discount?e.jsxs("h6",{children:[e.jsxs("strong",{children:[o("discountRate"),": "]}),s.discount_rate*100,"%"]}):null,s.size_and_color?e.jsxs("div",{children:[e.jsx("h6",{children:e.jsxs("strong",{children:[o("sizes"),":"]})}),e.jsxs("table",{className:"sizesTable",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[JSON.parse(s.size_and_color).map(c=>c.color).filter(c=>c).length>0&&e.jsx("th",{children:"Color"}),JSON.parse(s.size_and_color).map(c=>c.size).filter(c=>c).length>0&&e.jsx("th",{children:o("size")}),e.jsx("th",{children:o("quantity")})]})}),e.jsx("tbody",{children:ee.Children.toArray(JSON.parse(s.size_and_color).map(c=>e.jsxs("tr",{children:[c.color&&e.jsx("td",{children:c.color}),c.size&&e.jsx("td",{children:c.size}),e.jsx("td",{children:c.quantity})]},Math.random())))}),e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:o("totalQuantity")}),e.jsx("th",{children:s.quantity})]})})]})]}):null,v!=="pending"&&e.jsxs(E,{className:"justify-content-between",children:[e.jsx(u,{xs:"auto",children:e.jsx(it,{data:s,updateDiscount:f})}),e.jsx(u,{xs:"auto",children:e.jsx(at,{deleteHandler:()=>j({id:s.id}),product:s})}),e.jsx(u,{xs:"auto",children:e.jsx(rt,{product:s,updateSizeAndQuantity:l})}),e.jsx(u,{xs:"auto",children:e.jsx(ot,{product:s})}),e.jsx(u,{xs:"auto",children:e.jsxs(P,{color:"primary",onClick:()=>{d(`/product/updateProduct?id=${s.id}`)},children:[e.jsx($,{icon:Oe}),o("editProduct")]})})]})]},s.entitle+x))),e.jsx(Ie,{count:h,params:t,pageNumber:t.offset+1,pageSize:t.limit,onPageChange:A,cookieName:v})]})})},dt={addProductPictureHandler:we,deleteProductPictureHandler:ke,updateSizeAndQuantity:Se,updateDiscount:Ce,deleteProductHandler:be},xe=Ke(null,dt)(ct),Pt=()=>{const[a,S]=C.useState(oe.load("status")||"approved"),{t:l}=L("translation",{keyPrefix:"addProduct"}),{overviewParams:f}=re(d=>d.products),j=Y(),v=(d,h)=>{d.preventDefault(),S(h),oe.save("status",h,{path:"/"})};return C.useEffect(()=>{j(me({...f,status:a}))},[a]),C.useEffect(()=>{j(De())},[f]),e.jsxs("div",{className:"products",children:[e.jsx("h2",{children:l("yourProducts")}),e.jsx("hr",{}),e.jsxs(Ee,{variant:"pills",role:"tablist",children:[e.jsx(le,{children:e.jsx(ce,{href:"",active:a==="approved",onClick:d=>v(d,"approved"),children:l("approved")})}),e.jsx(le,{children:e.jsx(ce,{href:"",active:a==="rejected",onClick:d=>v(d,"rejected"),children:l("rejected")})})]}),e.jsxs(He,{children:[e.jsx(de,{role:"tabpanel","aria-labelledby":"home-tab",visible:a==="approved",children:a==="approved"&&e.jsx(xe,{status:a})}),e.jsx(de,{role:"tabpanel","aria-labelledby":"contact-tab",visible:a==="rejected",children:a==="rejected"&&e.jsx(xe,{status:a})})]})]})};export{Pt as default};
