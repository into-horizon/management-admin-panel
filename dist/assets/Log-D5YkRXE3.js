import{j as s,R as g,ci as h,ab as b,aC as S,ch as C,r as i,m as y,n as f,cj as j,ck as _,cl as E,P as q,Q as N,aN as O}from"./index-48Ud3P6g.js";import{T as P}from"./Table-BMwozXSY.js";import{F as D}from"./FilterCard-D5uFsBWP.js";import{S as L}from"./SearchDropdown-CwB1jFTy.js";import"./Paginator-C-gW1K4z.js";import"./lodash-BeNFXnYs.js";import"./index.esm-CyPqoXYn.js";import"./cil-check-CLln4ywF.js";import"./cil-filter-x-DEIlHx5l.js";import"./cil-search-C59ySTwT.js";const o=({data:e})=>s.jsx("div",{children:s.jsx("ul",{children:Object.entries(e).map(([a,t])=>typeof t=="object"&&t!==null?s.jsxs("li",{children:[s.jsxs("strong",{children:[a,":"]}),s.jsx(o,{data:t})]},a):s.jsx("li",{children:s.jsxs("p",{children:[s.jsxs("strong",{children:[a,":"]})," ",s.jsx("span",{children:String(t).length>=200?String(t).substring(0,200).padEnd(190,"."):String(t)})]})},a))})}),R=e=>{const[a,t]=g.useState(!1);return h(e==null?void 0:e.response_body)&&s.jsxs(s.Fragment,{children:[s.jsx(b,{size:"sm",onClick:()=>t(!0),children:"show Details"}),s.jsx(S,{alignment:"center",visible:a,onClose:()=>t(!1),size:"xl",children:s.jsxs(C,{children:[s.jsx(o,{data:JSON.parse(e==null?void 0:e.response_body)}),","]})})]})},$=[{header:"method",field:"method"},{header:"url",field:"url"},{header:"status",field:"status"},{header:"user",field:"user",body:e=>{if(e.employee)return` ${e.employee.first_name} ${e.employee.last_name} as Employee`;if(e.profile)return`User ${e.profile.first_name} ${e.profile.last_name} as User`}},{header:"query",field:"query",body:e=>(e==null?void 0:e.query)&&s.jsx(o,{data:e==null?void 0:e.query})},{header:"request body",field:"request_body",body:e=>h(e==null?void 0:e.request_body)&&s.jsx(o,{data:JSON.parse(e==null?void 0:e.request_body)})},{header:"response body",field:"response_body",body:e=>s.jsx(R,{...e})},{header:"created at",field:"created_at",body:e=>new Date(e.created_at).toLocaleString()}],z=()=>{const[e,a]=i.useState([]),[t,r]=i.useState(null),[c,d]=i.useState(!1),{params:p}=y(n=>n.log),m=f(),l=async n=>{try{d(!0);const{data:x}=await _.getEmployees({limit:10,offset:0,key:n});a(x.data.map(u=>({title:u.name,id:u.id})))}finally{d(!1)}};return s.jsx(L,{options:e,onChange:l,onSelect:n=>{m(j({...p,employee_id:n==null?void 0:n.id})),r(n)},delay:1e3,placeholder:"employees",selectedValue:t,loading:c})},k=()=>{const[e,a]=i.useState(1),t=f(),{params:r,loading:c,data:d,count:p}=y(l=>l.log);i.useEffect(()=>{t(E())},[r]);const m=l=>{a(l),t(j(O(r,l)))};return s.jsxs("div",{children:[s.jsx(D,{showButtons:!0,children:s.jsx(q,{className:" justify-content-center my-3",children:s.jsx(N,{xs:12,md:6,lg:4,children:s.jsx(z,{})})})}),s.jsx(P,{loading:c,data:d,count:p,columns:$,onPageChange:m,pageNumber:e,pageSize:+r.limit})]})};export{k as default};
